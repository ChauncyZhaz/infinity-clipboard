<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ— é™å‰ªè´´æ¿ - Infinity Clipboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            overflow: hidden;
            height: 100vh;
        }

        /* é¡¶éƒ¨å·¥å…·æ  */
        .toolbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #2c3e50;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .toolbar h1 {
            font-size: 18px;
            margin-right: 30px;
        }

        .search-container {
            flex: 1;
            max-width: 400px;
            margin: 0 20px;
        }

        .search-input {
            width: 100%;
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background: #34495e;
            color: white;
            font-size: 14px;
        }

        .search-input::placeholder {
            color: #bdc3c7;
        }

        .toolbar-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        /* ä¸»ç”»å¸ƒåŒºåŸŸ */
        .canvas-container {
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: auto;
            background: #ecf0f1;
        }

        .canvas {
            position: relative;
            min-width: 100%;
            min-height: 100%;
            padding: 20px;
        }

        /* ç½‘æ ¼å¸ƒå±€ */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        /* å‰ªè´´æ¿é¡¹ç›® */
        .clipboard-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
            position: relative;
            min-height: 100px;
        }

        .clipboard-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .clipboard-item.highlight {
            background: #fff3cd;
            border: 2px solid #ffc107;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .item-type {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            font-weight: bold;
        }

        .item-actions {
            display: flex;
            gap: 5px;
        }

        .action-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            background: #f8f9fa;
            color: #666;
        }

        .action-btn:hover {
            background: #e9ecef;
        }

        .item-content {
            word-wrap: break-word;
        }

        .text-content {
            font-size: 14px;
            line-height: 1.5;
            color: #333;
        }

        .code-content {
            background: #f8f9fa;
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
            overflow-x: auto;
        }

        .image-content img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            cursor: pointer;
        }

        .image-content img:hover {
            opacity: 0.8;
        }

        .item-timestamp {
            font-size: 11px;
            color: #999;
            margin-top: 10px;
        }

        /* ä»£ç è¯­è¨€é€‰æ‹©å™¨ */
        .language-selector {
            position: absolute;
            top: 5px;
            right: 5px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 4px;
            font-size: 12px;
        }

        /* ç©ºçŠ¶æ€ */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            color: #666;
            text-align: center;
        }

        .empty-state h2 {
            margin-bottom: 10px;
            color: #333;
        }

        .empty-state p {
            margin-bottom: 20px;
        }

        /* æç¤ºæ¡† */
        .tooltip {
            position: fixed;
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            z-index: 1001;
            pointer-events: none;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .toolbar {
                padding: 0 10px;
            }
            
            .toolbar h1 {
                font-size: 16px;
                margin-right: 15px;
            }
            
            .search-container {
                margin: 0 10px;
            }
            
            .grid {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px;
            }
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <div class="toolbar">
        <h1>ğŸ“‹ æ— é™å‰ªè´´æ¿</h1>
        
        <div class="search-container">
            <input type="text" class="search-input" placeholder="æœç´¢å‰ªè´´æ¿å†…å®¹..." id="searchInput">
        </div>
        
        <div class="toolbar-buttons">
            <button class="btn btn-primary" onclick="clearAll()">æ¸…ç©ºå…¨éƒ¨</button>
            <button class="btn btn-secondary" onclick="exportData()">å¯¼å‡ºæ•°æ®</button>
            <button class="btn btn-secondary" onclick="importData()">å¯¼å…¥æ•°æ®</button>
            <button class="btn btn-secondary" onclick="showHelp()" title="ä½¿ç”¨å¸®åŠ©">â“</button>
        </div>
    </div>

    <!-- ä¸»ç”»å¸ƒåŒºåŸŸ -->
    <div class="canvas-container">
        <div class="canvas">
            <div class="grid" id="clipboardGrid">
                <!-- å‰ªè´´æ¿é¡¹ç›®å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div class="tooltip" id="tooltip" style="display: none;"></div>

    <script>
        // å…¨å±€å˜é‡
        let clipboardItems = [];
        let currentSearchTerm = '';
        let nextId = 1;

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            loadClipboardData();
            setupEventListeners();
            renderClipboardItems();
        });

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // ç²˜è´´äº‹ä»¶
            document.addEventListener('paste', handlePaste);
            
            // æœç´¢äº‹ä»¶
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            
            // é”®ç›˜å¿«æ·é”®
            document.addEventListener('keydown', handleKeyboardShortcuts);
            
            // ç‚¹å‡»äº‹ä»¶å§”æ‰˜
            document.getElementById('clipboardGrid').addEventListener('click', handleGridClick);
            
            // å³é”®èœå•äº‹ä»¶
            document.addEventListener('contextmenu', handleContextMenu);
        }

        // å¤„ç†ç²˜è´´äº‹ä»¶
        function handlePaste(event) {
            event.preventDefault();
            
            const clipboardData = event.clipboardData;
            if (!clipboardData) return;

            // å¤„ç†å›¾ç‰‡
            if (clipboardData.files.length > 0) {
                const file = clipboardData.files[0];
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        addClipboardItem({
                            type: 'image',
                            content: e.target.result,
                            timestamp: new Date()
                        });
                    };
                    reader.readAsDataURL(file);
                    return;
                }
            }

            // å¤„ç†æ–‡æœ¬
            const text = clipboardData.getData('text/plain');
            if (text) {
                // æ£€æµ‹æ˜¯å¦ä¸ºä»£ç 
                const isCode = detectCode(text);
                addClipboardItem({
                    type: isCode ? 'code' : 'text',
                    content: text,
                    language: isCode ? detectLanguage(text) : null,
                    timestamp: new Date()
                });
            }
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºä»£ç 
        function detectCode(text) {
            const codePatterns = [
                /function\s+\w+\s*\(/,
                /if\s*\(.*\)\s*{/,
                /for\s*\(.*\)\s*{/,
                /while\s*\(.*\)\s*{/,
                /import\s+.*from/,
                /require\s*\(/,
                /console\.log/,
                /class\s+\w+/,
                /def\s+\w+/,
                /public\s+class/,
                /private\s+\w+/,
                /protected\s+\w+/,
                /<html>/i,
                /<!DOCTYPE/i,
                /<script>/i,
                /<style>/i
            ];
            
            return codePatterns.some(pattern => pattern.test(text));
        }

        // æ£€æµ‹ä»£ç è¯­è¨€
        function detectLanguage(text) {
            if (text.includes('function') && text.includes('console.log')) return 'javascript';
            if (text.includes('import') && text.includes('from')) return 'javascript';
            if (text.includes('def ') && text.includes(':')) return 'python';
            if (text.includes('public class') || text.includes('private ')) return 'java';
            if (text.includes('<html>') || text.includes('<!DOCTYPE')) return 'html';
            if (text.includes('<script>')) return 'javascript';
            if (text.includes('<style>')) return 'css';
            if (text.includes('function') && text.includes('{')) return 'javascript';
            return 'text';
        }

        // æ·»åŠ å‰ªè´´æ¿é¡¹ç›®
        function addClipboardItem(item) {
            item.id = nextId++;
            clipboardItems.unshift(item);
            saveClipboardData();
            renderClipboardItems();
            showTooltip('å†…å®¹å·²æ·»åŠ åˆ°å‰ªè´´æ¿ï¼');
        }

        // æ¸²æŸ“å‰ªè´´æ¿é¡¹ç›®
        function renderClipboardItems() {
            const grid = document.getElementById('clipboardGrid');
            const filteredItems = filterItems(clipboardItems, currentSearchTerm);
            
            if (filteredItems.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <h2>ğŸ“‹ æ— é™å‰ªè´´æ¿</h2>
                        <p>è¿˜æ²¡æœ‰ä»»ä½•å†…å®¹ï¼Œè¯•è¯•ç²˜è´´ä¸€äº›æ–‡æœ¬ã€ä»£ç æˆ–å›¾ç‰‡å§ï¼</p>
                        <p>ğŸ’¡ æç¤ºï¼šä½¿ç”¨ Ctrl+V ç²˜è´´å†…å®¹</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredItems.map(item => createItemHTML(item)).join('');
        }

        // åˆ›å»ºé¡¹ç›®HTML
        function createItemHTML(item) {
            const timestamp = new Date(item.timestamp).toLocaleString('zh-CN');
            const content = escapeHtml(item.content);
            
            let contentHTML = '';
            if (item.type === 'image') {
                contentHTML = `<div class="image-content"><img src="${content}" alt="ç²˜è´´çš„å›¾ç‰‡"></div>`;
            } else if (item.type === 'code') {
                contentHTML = `
                    <div class="code-content">${content}</div>
                    <select class="language-selector" onchange="changeLanguage(${item.id}, this.value)">
                        <option value="text" ${item.language === 'text' ? 'selected' : ''}>æ–‡æœ¬</option>
                        <option value="javascript" ${item.language === 'javascript' ? 'selected' : ''}>JavaScript</option>
                        <option value="python" ${item.language === 'python' ? 'selected' : ''}>Python</option>
                        <option value="java" ${item.language === 'java' ? 'selected' : ''}>Java</option>
                        <option value="html" ${item.language === 'html' ? 'selected' : ''}>HTML</option>
                        <option value="css" ${item.language === 'css' ? 'selected' : ''}>CSS</option>
                    </select>
                `;
            } else if (item.type === 'image') {
                contentHTML = `
                    <div class="image-content">
                        <img src="${content}" alt="ç²˜è´´çš„å›¾ç‰‡" title="å³é”®ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹æ›´å¤šé€‰é¡¹">
                    </div>
                    <div style="font-size: 11px; color: #666; margin-top: 5px;">
                        ğŸ’¡ æç¤ºï¼šå³é”®ç‚¹å‡»å›¾ç‰‡å¯å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
                    </div>
                `;
            } else {
                contentHTML = `<div class="text-content">${content}</div>`;
            }

            return `
                <div class="clipboard-item" data-id="${item.id}">
                    <div class="item-header">
                        <span class="item-type">${getTypeIcon(item.type)} ${item.type}</span>
                        <div class="item-actions">
                            <button class="action-btn" onclick="copyToClipboard('${escapeHtml(item.content)}', '${item.type}')" title="å¤åˆ¶åˆ°å‰ªè´´æ¿">ğŸ“‹</button>
                            <button class="action-btn" onclick="deleteItem(${item.id})" title="åˆ é™¤">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div class="item-content">
                        ${contentHTML}
                    </div>
                    <div class="item-timestamp">${timestamp}</div>
                </div>
            `;
        }

        // è·å–ç±»å‹å›¾æ ‡
        function getTypeIcon(type) {
            const icons = {
                'text': 'ğŸ“',
                'code': 'ğŸ’»',
                'image': 'ğŸ–¼ï¸'
            };
            return icons[type] || 'ğŸ“„';
        }

        // è¿‡æ»¤é¡¹ç›®
        function filterItems(items, searchTerm) {
            if (!searchTerm) return items;
            
            return items.filter(item => {
                const content = item.content.toLowerCase();
                const search = searchTerm.toLowerCase();
                return content.includes(search);
            });
        }

        // å¤„ç†æœç´¢
        function handleSearch(event) {
            currentSearchTerm = event.target.value;
            renderClipboardItems();
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        async function copyToClipboard(content, type = 'text') {
            try {
                if (type === 'image') {
                    // å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
                    const response = await fetch(content);
                    const blob = await response.blob();
                    await navigator.clipboard.write([
                        new ClipboardItem({
                            [blob.type]: blob
                        })
                    ]);
                    showTooltip('å›¾ç‰‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                } else {
                    // å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
                    await navigator.clipboard.writeText(content);
                    showTooltip('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                }
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                if (type === 'image') {
                    // å›¾ç‰‡å¤åˆ¶å¤±è´¥æ—¶çš„é™çº§æ–¹æ¡ˆ
                    showTooltip('å›¾ç‰‡å¤åˆ¶å¤±è´¥ï¼Œè¯·å³é”®ä¿å­˜å›¾ç‰‡');
                } else {
                    // æ–‡æœ¬å¤åˆ¶å¤±è´¥æ—¶çš„é™çº§æ–¹æ¡ˆ
                    const textArea = document.createElement('textarea');
                    textArea.value = content;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showTooltip('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                }
            }
        }

        // åˆ é™¤é¡¹ç›®
        function deleteItem(id) {
            clipboardItems = clipboardItems.filter(item => item.id !== id);
            saveClipboardData();
            renderClipboardItems();
            showTooltip('é¡¹ç›®å·²åˆ é™¤ï¼');
        }

        // æ¸…ç©ºå…¨éƒ¨
        function clearAll() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å‰ªè´´æ¿å†…å®¹å—ï¼Ÿ')) {
                clipboardItems = [];
                saveClipboardData();
                renderClipboardItems();
                showTooltip('æ‰€æœ‰å†…å®¹å·²æ¸…ç©ºï¼');
            }
        }

        // å¯¼å‡ºæ•°æ®
        function exportData() {
            const data = JSON.stringify(clipboardItems, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `clipboard-data-${new Date().toISOString().slice(0, 10)}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showTooltip('æ•°æ®å·²å¯¼å‡ºï¼');
        }

        // å¯¼å…¥æ•°æ®
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const importedData = JSON.parse(e.target.result);
                            clipboardItems = importedData;
                            nextId = Math.max(...clipboardItems.map(item => item.id), 0) + 1;
                            saveClipboardData();
                            renderClipboardItems();
                            showTooltip('æ•°æ®å·²å¯¼å…¥ï¼');
                        } catch (error) {
                            alert('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        // æ”¹å˜ä»£ç è¯­è¨€
        function changeLanguage(id, language) {
            const item = clipboardItems.find(item => item.id === id);
            if (item) {
                item.language = language;
                saveClipboardData();
            }
        }

        // å¤„ç†é”®ç›˜å¿«æ·é”®
        function handleKeyboardShortcuts(event) {
            // Ctrl+V å·²ç»åœ¨ç²˜è´´äº‹ä»¶ä¸­å¤„ç†
            if (event.ctrlKey && event.key === 'f') {
                event.preventDefault();
                document.getElementById('searchInput').focus();
            }
            if (event.ctrlKey && event.key === 'a') {
                event.preventDefault();
                // å…¨é€‰å½“å‰é¡¹ç›®ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰
            }
            if (event.key === 'Escape') {
                document.getElementById('searchInput').value = '';
                currentSearchTerm = '';
                renderClipboardItems();
            }
        }

        // å¤„ç†ç½‘æ ¼ç‚¹å‡»äº‹ä»¶
        function handleGridClick(event) {
            const item = event.target.closest('.clipboard-item');
            if (item && event.target.classList.contains('clipboard-item')) {
                // ç‚¹å‡»é¡¹ç›®æ—¶å¤åˆ¶å†…å®¹
                const id = parseInt(item.dataset.id);
                const clipboardItem = clipboardItems.find(item => item.id === id);
                if (clipboardItem) {
                    copyToClipboard(clipboardItem.content, clipboardItem.type);
                }
            }
        }

        // å¤„ç†å³é”®èœå•
        function handleContextMenu(event) {
            const img = event.target.closest('.image-content img');
            if (img) {
                event.preventDefault();
                const item = img.closest('.clipboard-item');
                const id = parseInt(item.dataset.id);
                const clipboardItem = clipboardItems.find(item => item.id === id);
                
                if (clipboardItem && clipboardItem.type === 'image') {
                    showImageContextMenu(event, clipboardItem);
                }
            }
        }

        // æ˜¾ç¤ºå›¾ç‰‡å³é”®èœå•
        function showImageContextMenu(event, clipboardItem) {
            // ç§»é™¤ç°æœ‰çš„å³é”®èœå•
            const existingMenu = document.getElementById('contextMenu');
            if (existingMenu) {
                existingMenu.remove();
            }

            const menu = document.createElement('div');
            menu.id = 'contextMenu';
            menu.style.cssText = `
                position: fixed;
                top: ${event.clientY}px;
                left: ${event.clientX}px;
                background: white;
                border: 1px solid #ddd;
                border-radius: 4px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                z-index: 10000;
                min-width: 150px;
            `;

            const menuItems = [
                { text: 'å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿', action: () => copyToClipboard(clipboardItem.content, 'image') },
                { text: 'ä¿å­˜å›¾ç‰‡', action: () => downloadImage(clipboardItem.content) },
                { text: 'åœ¨æ–°çª—å£æ‰“å¼€', action: () => window.open(clipboardItem.content, '_blank') }
            ];

            menuItems.forEach(item => {
                const menuItem = document.createElement('div');
                menuItem.textContent = item.text;
                menuItem.style.cssText = `
                    padding: 8px 12px;
                    cursor: pointer;
                    border-bottom: 1px solid #eee;
                    font-size: 14px;
                `;
                menuItem.addEventListener('mouseenter', () => {
                    menuItem.style.background = '#f5f5f5';
                });
                menuItem.addEventListener('mouseleave', () => {
                    menuItem.style.background = 'white';
                });
                menuItem.addEventListener('click', () => {
                    item.action();
                    menu.remove();
                });
                menu.appendChild(menuItem);
            });

            document.body.appendChild(menu);

            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
            setTimeout(() => {
                document.addEventListener('click', function closeMenu() {
                    menu.remove();
                    document.removeEventListener('click', closeMenu);
                });
            }, 100);
        }

        // ä¸‹è½½å›¾ç‰‡
        function downloadImage(imageSrc) {
            const link = document.createElement('a');
            link.href = imageSrc;
            link.download = `clipboard-image-${Date.now()}.png`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showTooltip('å›¾ç‰‡å·²ä¿å­˜ï¼');
        }

        // æ˜¾ç¤ºæç¤ºæ¡†
        function showTooltip(message) {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = message;
            tooltip.style.display = 'block';
            
            setTimeout(() => {
                tooltip.style.display = 'none';
            }, 2000);
        }

        // è½¬ä¹‰HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveClipboardData() {
            try {
                localStorage.setItem('infinityClipboardData', JSON.stringify(clipboardItems));
                localStorage.setItem('infinityClipboardNextId', nextId.toString());
            } catch (error) {
                console.error('ä¿å­˜æ•°æ®å¤±è´¥:', error);
            }
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
        function loadClipboardData() {
            try {
                const savedData = localStorage.getItem('infinityClipboardData');
                const savedNextId = localStorage.getItem('infinityClipboardNextId');
                
                if (savedData) {
                    clipboardItems = JSON.parse(savedData);
                }
                
                if (savedNextId) {
                    nextId = parseInt(savedNextId);
                }
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                clipboardItems = [];
                nextId = 1;
            }
        }

        // æ˜¾ç¤ºä½¿ç”¨è¯´æ˜
        function showHelp() {
            const helpText = `
å¿«æ·é”®è¯´æ˜ï¼š
â€¢ Ctrl+V: ç²˜è´´å†…å®¹
â€¢ Ctrl+F: èšç„¦æœç´¢æ¡†
â€¢ Esc: æ¸…ç©ºæœç´¢
â€¢ ç‚¹å‡»é¡¹ç›®: å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿

åŠŸèƒ½è¯´æ˜ï¼š
â€¢ æ”¯æŒæ–‡æœ¬ã€ä»£ç ã€å›¾ç‰‡ç²˜è´´
â€¢ è‡ªåŠ¨æ£€æµ‹ä»£ç ç±»å‹
â€¢ æœ¬åœ°å­˜å‚¨ï¼Œæ•°æ®å®‰å…¨
â€¢ æœç´¢åŠŸèƒ½å¿«é€Ÿå®šä½
â€¢ æ”¯æŒæ•°æ®å¯¼å…¥å¯¼å‡º

å›¾ç‰‡å¤„ç†ï¼š
â€¢ å³é”®ç‚¹å‡»å›¾ç‰‡å¯å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
â€¢ æ”¯æŒä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°
â€¢ æ”¯æŒåœ¨æ–°çª—å£æ‰“å¼€å›¾ç‰‡
            `;
            alert(helpText);
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
        window.addEventListener('load', function() {
            if (clipboardItems.length === 0) {
                showTooltip('æ¬¢è¿ä½¿ç”¨æ— é™å‰ªè´´æ¿ï¼æŒ‰ Ctrl+V å¼€å§‹ç²˜è´´å†…å®¹');
            }
        });
    </script>
</body>
</html> 